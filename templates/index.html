{% extends 'base_bbs.html' %}


{% block page-main %}

<style>
    *{margin:0;padding:0}
    body{background-color: gainsboro;}
</style>

<!--主頁面 開始-->
<div class="container" >
    <div class="row">
        <div class="col-sm-2 " >
            <div class="panel panel-default" style="margin-top: 5px; " id="ranking">
                <div class="panel-heading"><span style="font-size: 1.2em; font-weight: bold;">&nbsp;&nbsp;<i class="fa fa-fire" aria-hidden="true"></i>
                    &nbsp;哈燒排行榜&nbsp;</span></div>
                <div class="panel-body">

                    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true" style="margin-bottom: 0px; ">
                        <div class="panel panel-default" >
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title">
                                    <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne"
                                       aria-expanded="false"  aria-controls="collapseOne">
                                        <i class="fa fa-thumbs-o-up" aria-hidden="true"></i>&nbsp; 點讚人次
                                    </a>
                                </h4>
                            </div>
                            <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel"
                                 aria-labelledby="headingOne">
                                <div class="panel-body" >
                                    <!--<span style="display:inline-block;">1.抖音10大網紅排名:你認識幾個？</span>2.男人夢想神位3.TikTok-->
                                    <ol>
                                        {% for each in up_count_rank %}
                                            <li><a href="/blog/{{each.user__username}}/article/{{each.nid}}/">{{each.title}}</a></li>
                                        {% endfor %}
                                    </ol>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingTwo">
                                <h4 class="panel-title">
                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                                       href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                        <i class="fa fa-comments" aria-hidden="true"></i>&nbsp; 評論次數

                                    </a>
                                </h4>
                            </div>
                            <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel"
                                 aria-labelledby="headingTwo">
                                <div class="panel-body">
                                    <ol>
                                        {% for each in comment_count_rank %}
                                            <li><a href="/blog/{{each.user__username}}/article/{{each.nid}}/">{{each.title}}</a></li>
                                        {% endfor %}
                                    </ol>

                                </div>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingThree">
                                <h4 class="panel-title">
                                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion"
                                       href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                        <i class="fa fa-eye" aria-hidden="true"></i>&nbsp;觀看人次

                                    </a>
                                </h4>
                            </div>
                            <div id="collapseThree" class="panel-collapse collapse" role="tabpanel"
                                 aria-labelledby="headingThree">
                                <div class="panel-body">
                                   <ol>
                                        {% for each in view_count_rank %}
                                            <li><a href="/blog/{{each.user__username}}/article/{{each.nid}}/">{{each.title}}</a></li>
                                        {% endfor %}
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-8 Card"> <!--Card-->

            <!--&lt;!&ndash;Carousel&ndash;&gt;-->
            <!--<div id="carousel-example-generic" class="carousel slide" data-ride="carousel" style="margin-top: 7px; height: 200px">-->
              <!--&lt;!&ndash; Indicators &ndash;&gt;-->
              <!--<ol class="carousel-indicators">-->
                <!--<li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>-->
                <!--<li data-target="#carousel-example-generic" data-slide-to="1"></li>-->
                <!--<li data-target="#carousel-example-generic" data-slide-to="2"></li>-->
              <!--</ol>-->

              <!--&lt;!&ndash; Wrapper for slides &ndash;&gt;-->
              <!--<div class="carousel-inner" role="listbox">-->
                <!--<div class="item active">-->
                  <!--<img src="..." alt="...">-->
                  <!--<div class="carousel-caption">-->
                    <!--...-->
                  <!--</div>-->
                <!--</div>-->
                <!--<div class="item">-->
                  <!--<img src="..." alt="...">-->
                  <!--<div class="carousel-caption">-->
                    <!--...-->
                  <!--</div>-->
                <!--</div>-->
                <!--...-->
              <!--</div>-->

              <!--&lt;!&ndash; Controls &ndash;&gt;-->
              <!--<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">-->
                <!--<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>-->
                <!--<span class="sr-only">Previous</span>-->
              <!--</a>-->
              <!--<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">-->
                <!--<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>-->
                <!--<span class="sr-only">Next</span>-->
              <!--</a>-->
            <!--</div>-->
            <!--&lt;!&ndash;Carousel end&ndash;&gt;-->

            <hr style="margin-bottom: 5px; margin-top: 0px">
            <!-- Small button group -->
            <div class="btn-group" style="margin-left: 80%;" >
              <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                按發佈時間 <span class="caret"></span>
              </button>
              <ul class="dropdown-menu">
                  <li><a>按發佈時間</a></li>
                  <li><a>按點讚人次</a></li>
                  <li><a>按評論次數</a></li>
                  <li><a>按觀看人次</a></li>
              </ul>
            </div>
            <hr style="margin-top: 5px">
            <!-- 文章列表 開始 -->
            <div class="article-list">
                {% for article in article_list %}
                <div class="article">
                    <h4><a href="/blog/{{ article.user.username }}/article/{{ article.pk }}/">{{ article.title }}</a>
                    </h4>
                    <div class="media">
                        <div class="media-left">
                            <a href="#">
                                <img class="media-object author-img" src="/media/{{ article.user.avatar }}" alt="...">
                            </a>
                        </div>
                        <div class="media-body">
                            <p>{{ article.desc}}</p>
                        </div>
                    </div>
                    <div class="article-footer">
                        <span><a href="/blog/{{ article.user.username }}/">{{ article.user.username }}</a></span>發佈於
                        <span>{{ article.create_time|date:'Y-m-d H:i:s' }}</span>
                        {# <span class="glyphicon glyphicon-comment">評論({{ article.comment_count }})</span>#}
                        {# <span class="glyphicon glyphicon-thumbs-up">點讚({{ article.up_count }})</span>#}
                        <span><i class="fa fa-commenting-o fa-fw" aria-hidden="true"></i>評論({{ article.comment_count }})</span>
                        <span><i class="fa fa-thumbs-o-up fa-fw" aria-hidden="true"></i>點讚({{ article.up_count }})</span>
                        <span><i class="fa fa-eye fa-fw" aria-hidden="true"></i>觀看({{ article.view_count }})</span>
                    </div>
                    <hr>
                </div>
                {% endfor %}

            </div>
            <!-- 文章列表 结束-->

        </div>
        <div class="col-sm-2">
            <!--<div class="panel panel-default">-->
            <!--&lt;!&ndash;<div class="panel-heading">右側廣告欄位一</div>&ndash;&gt;-->
            <!--<div class="panel-body">-->
            <!--<span class="write-article"><a href="/backend/add_article/">寫文章</a></span>-->
            <!--</div>-->
            <!--</div>-->
            <!--<div class="panel panel-info">-->
            <!--<div class="panel-heading">右側廣告欄位二</div>-->
            <!--<div class="panel-body">-->
            <!--Panel content-->
            <!--</div>-->
            <!--</div>-->
            {% if request.user.username %}
            <div class="zzz">

                <a href="/blog/backend/add_article/">
                    <button style="margin:10px auto; margin-top: 0" type="button" class="btn  write-article"><i
                            class="fa fa-plus" aria-hidden="true"></i>&nbsp;&nbsp;寫新文章
                    </button>
                </a>

                <a href="/blog/{{ request.user.blog.site}}">
                    <button style="margin:10px auto; " type="button" class="btn  write-article"><i class="fa fa-home"
                                                                                                   aria-hidden="true"></i>&nbsp;&nbsp;個人主頁
                    </button>
                </a>

                <a href="/blog/backend/style/">
                    <button style="margin:10px auto; margin-bottom: 0" type="button" class="btn  write-article"><i
                            class="fa fa-paint-brush" aria-hidden="true"></i>&nbsp;&nbsp;博客彩繪
                    </button>
                </a>
            </div>

            {% else %}
            <div class="zzz">
                <button style="margin:10px auto; margin-top: 0"
                type="button" class="btn write-article" data-toggle="popover" data-placement="bottom"
                data-content=" 請先登入！">
                <i class="fa fa-plus"></i>&nbsp;&nbsp;寫新文章</button>

                <button style="margin:10px auto;" type="button" class="btn  write-article" data-toggle="popover"
                        data-placement="bottom"
                        data-content=" 請先登入！">
                    <i class="fa fa-home" aria-hidden="true"></i>&nbsp;&nbsp;個人主頁
                </button>

                <button style="margin:10px auto; margin-bottom: 0" type="button" class="btn  write-article"
                        data-toggle="popover" data-placement="bottom"
                        data-content=" 請先登入！">
                    <i class="fa fa-paint-brush" aria-hidden="true"></i>&nbsp;&nbsp;博客彩繪
                </button>
            </div>
            {% endif %}

        </div>
    </div>
</div>

<style>
    body {
        padding-top: 3%;
    }
</style>

<script>

    $(function () {
        $('[data-toggle="popover"]').popover()
    })

    $('button').on('click', function () {
        var xxx = this;
        setTimeout(function () {
            $(xxx).popover('hide')
        }, 3000)
    })

    $(window).scroll(function () {
        $(".zzz").css({"margin-top": ($(window).scrollTop()) + "px",});
        $("#ranking").css({"margin-top": ($(window).scrollTop()) + "px",});
    });

    $('ul.dropdown-menu li').on("click", function () {
        var chosen = $(this).text();
        var $this = $(this);
        $.ajax({
            url:"/blog/media_order/",
            type:"get",
            data:{chosen:chosen},
            success: function (data) {
                if (data.status){
                    alert(data.msg);
                }else {
                    $(".article-list").html("");
                    var s = "";
                    $.each(data.msg, function (index,article) {
                        s += '<div class="article"><h4><a href="/blog/'+article.user__username+'/article/'+article.pk+'/">'+article.title+'</a> ' +
                            '</h4><div class="media"><div class="media-left"><a href="#"><img class="media-object author-img" src="/media/'+article.user__avatar+'" alt="..."> </a></div><div class="media-body"><p>'+article.desc+
                            '</p></div></div><div class="article-footer"><span><a href="/blog/'+article.user__username+
                            '/">'+article.user__username+'</a></span>發佈於<span>&nbsp;'+article.c+'&nbsp;</span><span><i class="fa fa-commenting-o fa-fw" aria-hidden="true"></i>'+
                            '評論('+article.comment_count+')</span><span><i class="fa fa-thumbs-o-up fa-fw" aria-hidden="true"></i>點讚('+article.up_count+')</span> '+
                            '<span><i class="fa fa-eye fa-fw" aria-hidden="true"></i>觀看('+article.view_count +')</span></div><hr></div>'
                    });
                    $(".article-list").html(s);
                    $this.parent().prev().html(chosen+'&nbsp;<span class="caret"></span>');
                };
            },
        });
    });
</script>
<!-- 主頁面 结束-->


{% endblock %}

